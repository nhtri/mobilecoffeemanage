<div class=" content">
  <div class=" row">
    <div class=" col-md-12">
      <div class=" card">
        <div class=" card-header">
          <h4 class=" card-title" style="color: orangered; font-weight: bold;">DS SẢN PHẨM
          </h4>
        </div>
        <div class=" card-body">
          <button type="button" pButton icon="pi pi-file-excel" iconPos="left" label="EXCEL" (click)="exportExcel()"
            style="margin-right: 15px; margin-bottom: 15px;" class="ui-button-success"></button>
          <p-dropdown [options]="trangthaitt" (onChange)="onChangeCategory($event.value)" ></p-dropdown>
          <label style="margin-right: 20px;"> </label>
          <!-- <p-dropdown [options]="trangthaiactive" (onChange)="onChangeActive($event.value)"></p-dropdown> -->
          <p-table dataKey="id" editMode="row" #tt [columns]="cols" [value]="data" [paginator]="true" [rows]="20"
            [tableStyle]="{'table-layout':'auto'}" (onRowSelect)="onRowSelect($event)"
            (onHeaderCheckboxToggle)="onTableHeaderCheckboxToggle($event)" (onRowUnselect)="onRowUnselect($event)">

            <ng-template pTemplate="header" let-columns class=" text-primary">
              <tr>
                <th></th>

                <!-- <th *ngFor="let col of columns" [pSortableColumn]="col.field">
                  {{col.header}}
                </th> -->
                <th>Danh mục</th>
                <th>Tên</th>
                <th>Tóm tắt</th>
                <th>Chi tiết</th>
                <th>Giá</th>
                <th>Nhận xét</th>
                <th>Bảo hành</th>
                <th>Trạng thái</th>
                <th>Thứ tự</th>
                <th></th>
                <th></th>
              </tr>


            </ng-template>
            <ng-template let-i="rowIndex" pTemplate="body" let-rowData let-columns="columns" let-editing="editing"
              let-ri="rowIndex">
              <tr [pEditableRow]="rowData">
                <td>{{i+1}}</td>

                <td *ngFor="let col of columns">


                  <ng-container *ngIf="[col.field]!='active'">

                    {{rowData[col.field]}}
                  </ng-container>

                  <ng-container *ngIf="[col.field]=='active'">
                    <p-toggleButton (onChange)="handleChangeStatus(rowData)" onLabel="" offLabel=""
                    [(ngModel)]="rowData[col.field]" onIcon="pi pi-check" offIcon="pi pi-times"></p-toggleButton>
                    <!-- {{rowData[col.field]}} -->
                  </ng-container>

                </td>


                <td style="text-align:center">
                  <!-- <button routerLink="/detail" [state]="rowData" pButton pRipple type="button" pInitEditableRow icon="pi pi-pencil" (click)="onRowEditInit(rowData)" class="p-button-rounded p-button-text"></button> -->
                  <button (click)="onRowEditInit(rowData)" pButton pRipple type="button" pInitEditableRow
                    icon="pi pi-pencil" class="p-button-rounded p-button-text"></button>

                </td>
                <td style="text-align:center">
                  <button style="background-color: orangered;" pButton type="button" pCancelEditableRow
                    icon="pi pi-trash" class="ui-button-danger" (click)="onRowDelete(rowData,ri)"
                    class="p-button-rounded p-button-text"></button>
                </td>
              </tr>
            </ng-template>
          </p-table>
          <p-dialog header="EDIT" [(visible)]="displayDialog" [focusOnShow]="false" [responsive]="true"
            showEffect="fade" [modal]="true" [style]="{width: '550px',height:'80%'}">

            <label style="margin-top: 15px; margin-right: 10px;"> Category: </label>
            <p-dropdown [options]="category" [(ngModel)]="categoryRow"></p-dropdown><br />
            <label style="margin-top: 15px; margin-right: 10px;"> Name: </label>
            <input type="text" pInputText [(ngModel)]="nameRow" style="width: 320px;" /> <br />
            <label style="margin-top: 15px;margin-right: 10px;"> Summary: </label>
            <input type="text" pInputText [(ngModel)]="summaryRow" style="width: 320px;" /> <br />
            <label style="margin-top: 15px; margin-right: 10px;"> Guarantee: </label>
            <input type="text" pInputText [(ngModel)]="guaranteeRow " style="width: 320px;" /> <br />
            <label style="margin-top: 15px; margin-right: 10px;"> Remarks: </label>
            <input type="text" pInputText [(ngModel)]="remarksRow" style="width: 320px;" /> <br />
            <label style="margin-top: 15px;margin-right: 10px;"> Price: </label>
            <input type="text" pInputText [(ngModel)]="priceRow" style="width: 320px;" /> <br />
            <label style="margin-top: 15px;margin-right: 10px;"> Video: </label>
            <input type="text" pInputText [(ngModel)]="videoRow" style="width: 320px;" /> <br />
            <label style="margin-top: 15px;margin-right: 10px;"> Image: </label>
            <textarea pInputTextarea [(ngModel)]="imageRow1" style="width: 420px;" rows="2"></textarea> <br />
            <label style="margin-top: 15px;margin-right: 10px;"> Details:</label>
            <textarea pInputTextarea [(ngModel)]="detailsRow" style="width: 420px;" rows="3"></textarea>

            <br />
            <p-footer>
              <div class="ui-dialog-buttonpane ui-helper-clearfix">

                <button type="button" pButton (click)="save()" label="Save"></button>
                <button type="button" pButton (click)="cancel()" label="Cancel"
                  style="background:rgba(224, 46, 22, 0.6)"></button>
              </div>
            </p-footer>

          </p-dialog>
        </div>
      </div>
    </div>

  </div>
</div>